<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль - Lakt4</title>
    <link rel="stylesheet" href="/lakt4-store/styles.css">
    <style>
        .profile-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .profile-photo-container {
            text-align: center;
            margin-bottom: 2rem;
            width: 150px;
            height: 150px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
        }

        .profile-photo-title {
            text-align: center;
            margin-bottom: 1rem;
            color: #666;
            font-weight: 500;
        }

        .profile-photo {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #FF9800;
            cursor: pointer;
            transition: transform 0.3s;
            background-color: #f5f5f5;
            position: relative;
            display: block;
        }

        .profile-photo.no-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23999"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            background-size: 60%;
            opacity: 0.5;
            border-radius: 50%;
        }

        .photo-upload-btn {
            background-color: #FF9800;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.9rem;
        }

        .photo-upload-btn:hover {
            background-color: #F57C00;
        }

        .photo-delete-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 0.5rem 0.8rem;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.85rem;
        }

        .photo-delete-btn:hover {
            background-color: #c82333;
        }

        .photo-buttons {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .profile-form {
            display: grid;
            gap: 1.5rem;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #666;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #FF9800;
        }

        .phone-group {
            display: flex;
            gap: 0.5rem;
            align-items: flex-start;
        }

        .country-code-container {
            position: relative;
            width: 120px;
        }

        .country-code-button {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            font-size: 1rem;
            background-color: white;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s;
        }

        .country-code-button:after {
            content: '▼';
            font-size: 0.8rem;
            margin-left: 5px;
            transition: transform 0.3s;
        }

        .country-code-button.active:after {
            transform: rotate(180deg);
        }

        .country-code-list {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            background-color: white;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            margin-top: 5px;
            z-index: 1000;
            display: none;
            scrollbar-width: thin;
            scrollbar-color: #FF9800 #f0f0f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .country-code-list.show {
            display: block;
        }

        .country-code-list::-webkit-scrollbar {
            width: 8px;
        }

        .country-code-list::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }

        .country-code-list::-webkit-scrollbar-thumb {
            background-color: #FF9800;
            border-radius: 4px;
            border: 2px solid #f0f0f0;
        }

        .country-code-list::-webkit-scrollbar-thumb:hover {
            background-color: #F57C00;
        }

        .country-option {
            padding: 0.8rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .country-option:hover {
            background-color: #f5f5f5;
        }

        body.dark .country-code-button,
        body.dark .country-code-list {
            background-color: #2d2d2d;
            color: white;
            border-color: #FF9800;
        }

        .country-option:hover {
            background-color: #3d3d3d;
        }

        .phone-input {
            flex: 1;
        }

        .theme-switcher {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: #f5f5f5;
            border-radius: 12px;
            text-align: center;
        }

        .theme-btn {
            margin: 0.5rem;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.3s;
            font-weight: 500;
        }

        .theme-btn:hover {
            transform: translateY(-2px);
        }

        .light-btn {
            background-color: #FF9800;
            color: white;
        }

        .dark-btn {
            background-color: #333;
            color: white;
        }

        .form-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .save-btn, .delete-btn {
            flex: 1;
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .save-btn {
            background-color: #4CAF50;
            color: white;
        }

        .delete-btn {
            background-color: #dc3545;
            color: white;
        }

        .save-btn:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        .delete-btn:hover {
            background-color: #c82333;
            transform: translateY(-2px);
        }

        body.dark .profile-photo.no-image {
            background-color: #2d2d2d;
        }

        body.dark .profile-photo.no-image::before {
            filter: invert(1);
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">Lakt4</div>
            <ul class="nav-links">
                <li><a href="/lakt4-store/index.html">Вещи</a></li>
                <li><a href="/lakt4-store/cart.html">Корзина</a></li>
                <li><a href="/lakt4-store/profile.html">Профиль</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="profile-container">
            <h3 class="profile-photo-title">Фото профиля</h3>
            <div class="profile-photo-container">
                <img src="" alt="" class="profile-photo no-image" id="profilePhoto">
                <input type="file" id="photoInput" accept="image/*" style="display: none">
            </div>
            <div class="photo-buttons">
                <button class="photo-upload-btn" onclick="document.getElementById('photoInput').click()">
                    Изменить фото
                </button>
                <button class="photo-delete-btn" onclick="deletePhoto()">
                    Удалить
                </button>
            </div>

            <form class="profile-form" id="profileForm">
                <div class="form-group">
                    <label for="firstName">Имя</label>
                    <input type="text" id="firstName" placeholder="Введите ваше имя" required>
                </div>
                <div class="form-group">
                    <label for="lastName">Фамилия</label>
                    <input type="text" id="lastName" placeholder="Введите вашу фамилию" required>
                </div>
                <div class="form-group">
                    <label for="birthdate">Дата рождения</label>
                    <input type="date" id="birthdate" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="example@mail.com" required>
                </div>
                <div class="form-group">
                    <label for="phone">Номер телефона</label>
                    <div class="phone-group">
                        <div class="country-code-container">
                            <button type="button" class="country-code-button" id="countryCodeButton">🇨🇿 +420</button>
                            <div class="country-code-list" id="countryCodeList">
                                <div class="country-option" data-code="+420">🇨🇿 +420 Чехия</div>
                                <div class="country-option" data-code="+421">🇸🇰 +421 Словакия</div>
                                <div class="country-option" data-code="+48">🇵🇱 +48 Польша</div>
                                <div class="country-option" data-code="+36">🇭🇺 +36 Венгрия</div>
                                <div class="country-option" data-code="+43">🇦🇹 +43 Австрия</div>
                                <div class="country-option" data-code="+49">🇩🇪 +49 Германия</div>
                                <div class="country-option" data-code="+7">🇷🇺 +7 Россия</div>
                                <div class="country-option" data-code="+380">🇺🇦 +380 Украина</div>
                                <div class="country-option" data-code="+375">🇧🇾 +375 Беларусь</div>
                                <div class="country-option" data-code="+371">🇱🇻 +371 Латвия</div>
                                <div class="country-option" data-code="+372">🇪🇪 +372 Эстония</div>
                                <div class="country-option" data-code="+370">🇱🇹 +370 Литва</div>
                                <div class="country-option" data-code="+33">🇫🇷 +33 Франция</div>
                                <div class="country-option" data-code="+44">🇬🇧 +44 Великобритания</div>
                                <div class="country-option" data-code="+39">🇮🇹 +39 Италия</div>
                                <div class="country-option" data-code="+34">🇪🇸 +34 Испания</div>
                                <div class="country-option" data-code="+351">🇵🇹 +351 Португалия</div>
                                <div class="country-option" data-code="+31">🇳🇱 +31 Нидерланды</div>
                                <div class="country-option" data-code="+32">🇧🇪 +32 Бельгия</div>
                                <div class="country-option" data-code="+41">🇨🇭 +41 Швейцария</div>
                            </div>
                        </div>
                        <input type="tel" id="phone" class="phone-input" placeholder="XXX XXX XXX" required>
                        <input type="hidden" id="countryCode" value="+420">
                    </div>
                </div>

                <div class="theme-switcher">
                    <h3>Выберите тему оформления</h3>
                    <button type="button" class="theme-btn light-btn" onclick="toggleTheme('light')">Светлая</button>
                    <button type="button" class="theme-btn dark-btn" onclick="toggleTheme('dark')">Тёмная</button>
                </div>

                <div class="form-buttons">
                    <button type="submit" class="save-btn">Сохранить изменения</button>
                    <button type="button" class="delete-btn" onclick="deleteProfile()">Удалить изменения</button>
                </div>
            </form>
        </div>
    </main>

    <footer>
        <p class="copyright">&copy; 2025 Lakt4. Все права защищены.</p>
        <div class="social-links">
            <a href="https://www.instagram.com/llakt4/" target="_blank" class="social-link">
                <img src="/lakt4-store/assets/images/instagram-icon.svg" alt="Instagram" class="social-icon">
                @llakt4
            </a>
        </div>
    </footer>

    <script src="/lakt4-store/script.js"></script>
    <script>
        // Обработка загрузки фото
        document.getElementById('photoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const profilePhoto = document.getElementById('profilePhoto');
                    profilePhoto.src = e.target.result;
                    profilePhoto.classList.remove('no-image');
                    localStorage.setItem('profilePhoto', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        });

        // Обработка формы
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const profileData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                birthdate: document.getElementById('birthdate').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('countryCode').value + ' ' + document.getElementById('phone').value
            };
            localStorage.setItem('profileData', JSON.stringify(profileData));
            alert('Профиль успешно сохранен!');
        });

        // Функция удаления фото
        function deletePhoto() {
            const profilePhoto = document.getElementById('profilePhoto');
            profilePhoto.src = '';
            profilePhoto.classList.add('no-image');
            localStorage.removeItem('profilePhoto');
            alert('Фото удалено!');
        }

        // Функция удаления всех данных профиля
        function deleteProfile() {
            if (confirm('Вы уверены, что хотите удалить все данные профиля?')) {
                localStorage.removeItem('profileData');
                localStorage.removeItem('profilePhoto');
                const profilePhoto = document.getElementById('profilePhoto');
                profilePhoto.src = '';
                profilePhoto.classList.add('no-image');
                document.getElementById('profileForm').reset();
                alert('Все данные профиля удалены!');
            }
        }

        // Обработка выбора кода страны
        const countryCodeButton = document.getElementById('countryCodeButton');
        const countryCodeList = document.getElementById('countryCodeList');
        const countryCodeInput = document.getElementById('countryCode');

        countryCodeButton.addEventListener('click', function() {
            countryCodeList.classList.toggle('show');
            this.classList.toggle('active');
        });

        // Закрытие списка при клике вне его
        document.addEventListener('click', function(e) {
            if (!countryCodeButton.contains(e.target) && !countryCodeList.contains(e.target)) {
                countryCodeList.classList.remove('show');
                countryCodeButton.classList.remove('active');
            }
        });

        // Обработка выбора страны
        document.querySelectorAll('.country-option').forEach(option => {
            option.addEventListener('click', function() {
                const code = this.dataset.code;
                const text = this.textContent.split(' ').slice(0, 2).join(' ');
                countryCodeButton.textContent = text;
                countryCodeInput.value = code;
                countryCodeList.classList.remove('show');
                countryCodeButton.classList.remove('active');
            });
        });

        // Загрузка сохраненных данных
        window.addEventListener('load', function() {
            const savedPhoto = localStorage.getItem('profilePhoto');
            const profilePhoto = document.getElementById('profilePhoto');
            if (savedPhoto) {
                profilePhoto.src = savedPhoto;
                profilePhoto.classList.remove('no-image');
            } else {
                profilePhoto.src = '';
                profilePhoto.classList.add('no-image');
            }

            const savedProfile = JSON.parse(localStorage.getItem('profileData') || '{}');
            if (savedProfile.phone) {
                const [countryCode, phoneNumber] = savedProfile.phone.split(' ');
                const countryOption = document.querySelector(`.country-option[data-code="${countryCode}"]`);
                if (countryOption) {
                    const text = countryOption.textContent.split(' ').slice(0, 2).join(' ');
                    countryCodeButton.textContent = text;
                    countryCodeInput.value = countryCode;
                }
                document.getElementById('phone').value = phoneNumber || '';
            }
            document.getElementById('firstName').value = savedProfile.firstName || '';
            document.getElementById('lastName').value = savedProfile.lastName || '';
            document.getElementById('birthdate').value = savedProfile.birthdate || '';
            document.getElementById('email').value = savedProfile.email || '';
        });
    </script>
</body>
</html>
